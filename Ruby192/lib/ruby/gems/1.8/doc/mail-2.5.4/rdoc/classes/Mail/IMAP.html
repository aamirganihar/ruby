<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Mail::IMAP</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Mail::IMAP</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/mail/network/retriever_methods/imap_rb.html">
                lib/mail/network/retriever_methods/imap.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Retriever.html">
                Retriever
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The <a href="IMAP.html">IMAP</a> retriever allows to get the last, first or
all emails from a <a href="IMAP.html">IMAP</a> server. Each email retrieved
(<a href="RFC2822.html">RFC2822</a>) is given as an instance of <tt><a
href="Message.html">Message</a></tt>.
</p>
<p>
While being retrieved, emails can be yielded if a block is given.
</p>
<h3>Example of retrieving Emails from GMail:</h3>
<pre>
  Mail.defaults do
    retriever_method :imap, { :address             =&gt; &quot;imap.googlemail.com&quot;,
                              :port                =&gt; 993,
                              :user_name           =&gt; '&lt;username&gt;',
                              :password            =&gt; '&lt;password&gt;',
                              :enable_ssl          =&gt; true }
  end

  Mail.all    #=&gt; Returns an array of all emails
  Mail.first  #=&gt; Returns the first unread email
  Mail.last   #=&gt; Returns the last unread email
</pre>
<p>
You can also pass options into Mail.find to locate an email in your imap
mailbox with the following options:
</p>
<pre>
  mailbox: name of the mailbox used for email retrieval. The default is 'INBOX'.
  what:    last or first emails. The default is :first.
  order:   order of emails returned. Possible values are :asc or :desc. Default value is :asc.
  count:   number of emails to retrieve. The default value is 10. A value of 1 returns an
           instance of Message, not an array of Message instances.
  keys:    are passed as criteria to the SEARCH command.  They can either be a string holding the entire search string,
           or a single-dimension array of search keywords and arguments.  Refer to  [IMAP] section 6.4.4 for a full list
           The default is 'ALL'

  Mail.find(:what =&gt; :first, :count =&gt; 10, :order =&gt; :asc, :keys=&gt;'ALL')
  #=&gt; Returns the first 10 emails in ascending order
</pre>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M001345">connection</a>&nbsp;&nbsp;
      <a href="#M001344">delete_all</a>&nbsp;&nbsp;
      <a href="#M001343">find</a>&nbsp;&nbsp;
      <a href="#M001342">new</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">settings</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M001342" class="method-detail">
        <a name="M001342"></a>

        <div class="method-heading">
          <a href="IMAP.src/M001342.html" target="Code" class="method-signature"
            onclick="popupCode('IMAP.src/M001342.html');return false;">
          <span class="method-name">new</span><span class="method-args">(values)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M001345" class="method-detail">
        <a name="M001345"></a>

        <div class="method-heading">
          <a href="IMAP.src/M001345.html" target="Code" class="method-signature"
            onclick="popupCode('IMAP.src/M001345.html');return false;">
          <span class="method-name">connection</span><span class="method-args">() {|imap| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="IMAP.html#M001345">connection</a> object of the
retrievable (<a href="IMAP.html">IMAP</a> or <a href="POP3.html">POP3</a>)
</p>
        </div>
      </div>

      <div id="method-M001344" class="method-detail">
        <a name="M001344"></a>

        <div class="method-heading">
          <a href="IMAP.src/M001344.html" target="Code" class="method-signature"
            onclick="popupCode('IMAP.src/M001344.html');return false;">
          <span class="method-name">delete_all</span><span class="method-args">(mailbox='INBOX')</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Delete all emails from a <a href="IMAP.html">IMAP</a> mailbox
</p>
        </div>
      </div>

      <div id="method-M001343" class="method-detail">
        <a name="M001343"></a>

        <div class="method-heading">
          <a href="IMAP.src/M001343.html" target="Code" class="method-signature"
            onclick="popupCode('IMAP.src/M001343.html');return false;">
          <span class="method-name">find</span><span class="method-args">(options={}) {|new_message, imap, message_id| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Find emails in a <a href="IMAP.html">IMAP</a> mailbox. Without any options,
the 10 last received emails are returned.
</p>
<p>
Possible options:
</p>
<pre>
  mailbox: mailbox to search the email(s) in. The default is 'INBOX'.
  what:    last or first emails. The default is :first.
  order:   order of emails returned. Possible values are :asc or :desc. Default value is :asc.
  count:   number of emails to retrieve. The default value is 10. A value of 1 returns an
           instance of Message, not an array of Message instances.
  read_only: will ensure that no writes are made to the inbox during the session.  Specifically, if this is
             set to true, the code will use the EXAMINE command to retrieve the mail.  If set to false, which
             is the default, a SELECT command will be used to retrieve the mail
             This is helpful when you don't want your messages to be set to read automatically. Default is false.
  delete_after_find: flag for whether to delete each retreived email after find. Default
          is false. Use #find_and_delete if you would like this to default to true.
  keys:   are passed as criteria to the SEARCH command.  They can either be a string holding the entire search string,
          or a single-dimension array of search keywords and arguments.  Refer to  [IMAP] section 6.4.4 for a full list
          The default is 'ALL'
</pre>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>